<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/profile/show.css">
<%- include('../partials/nav') %>

<main>

    <body>

        <div id="my-profile-container">

            <div id="my-profile-header">
        
                <h1 id="profile-header-text">Profile</h1>

                <img
                id="my-profile-icon"
                src="/images/icons/user.png"
                alt="my profile header image"
                />

            </div>

            <h1 id="my-profile-name"><%= profile.name %></h1>

            <% if (profile.avatar) { %>
            <div>
                <img 
                    id="my-profile-avatar"
                    src="<%= profile.avatar %>"
                    alt="<%= profile.name %> avatar"
                    class="rounded-circle"
                >
            </div>
            <% } %>

        </div>

        <div id="my-shelf-header">
            <h1 class="header-text">My Shelf</h1>

            <img
            id="my-shelf-icon"
            src="/images/icons/shelf.png"
            alt="my shelf header image"
            />
        </div>

        <div id="add-button-container">
            <a href="/collections/new">
                <button id="add-button" class="btn btn-success" id="add-button">âž• Add a New Collection</button></a>
        </div>
        
        <div id="collection-container">

            <% collections.forEach(collection => { %>

            <div id="individual-collection-container">

                <div class="line-elements">
                    <a href="/collections/<%= collection._id %>">
                        <img class="collection-image" src="<%= collection.records.length ? collection.records[0].imageUrl : "/images/icons/imageUrlHold.png"%>" alt="Card image cap" >
                    </a>
                </div>

                <div class="line-elements">
                    <a href="/collections/<%= collection._id %>">
                        <h4 class="collection-title"><%= collection.name %></h4>
                    </a>
                </div>

                <div class="line-elements">
                    <h7 class="collection-type"><%= collection.type %></h7>
                </div>

                <div class="line-elements" id="button-container">

                    <a href="/collections/<%= collection._id %>" class="btn btn-primary" id="view-btn">View</a>

                    <a href="/collections/<%= collection._id %>/edit" class="btn btn-warning" id="edit-btn">Edit</button></a>

                    <form 
                    action="/collections/<%= collection._id %>?_method=DELETE"
                    class="delete-form"
                    method="POST"
                    >
                    <button type="submit" class="btn btn-danger" id="delete-btn">Delete</button></form>
                </div>
            </div>
            <% }) %>
        </div>
    </body>
</main>

<%- include('../partials/footer') %>