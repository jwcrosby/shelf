<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/explore/index.css">
<%- include('../partials/nav') %>

<main>

  <body>

    <div id="explore-header">
    
      <h1 id="header">Explore</h1>

      <img
      id="explore-image"
      src="/images/icons/search.png"
      alt="explore header image"
      />

    </div>

    <div id="collection-container">

      <% collections.forEach(collection => { %>

        <div id="individual-collection-container">

          <div class="line-elements">
            <a href="/collections/<%= collection._id %>">
              <img class="collection-image" src="<%= collection.records.length ? collection.records[0].imageUrl : "/images/icons/imageUrlHold.png"%>" alt="Card image cap" >
            </a>
          </div>

          <div class="line-elements">
            <a href="/collections/<%= collection._id %>">
              <h4 class="collection-title"><%= collection.name %></h4>
            </a>
          </div>

          <div class="line-elements">
            <h4 class="collection-type"><%= collection.type %></h4>
          </div>

          <div id="owner-box"  class="line-elements">
            <% if (collection.owner.avatar) { %>
              <img
                id="collection-owner-image"
                src="<%= collection.owner.avatar %>"
                alt="<%= collection.owner.name %>'s avatar"
                class="rounded-circle"
              />
            <% } else { %>
              <img
                id="collection-owner-image"
                src="/images/icons/user.png"
                alt="A placeholder avatar"
                class="rounded-circle"
              />
            <% } %>

            <h5 id="collection-owner-name">by <%= collection.owner.name %></h5>
          </div>

          <div class="line-elements">
            <a href="/collections/<%= collection._id %>" id="view-element-btn" class="btn btn-primary">View</a>
          </div>

        </div>

        <% }) %>

    </div>

  </body>

</main>

<%- include('../partials/footer') %>